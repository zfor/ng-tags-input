angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.position","ui.bootstrap.bindHtml","ui.bootstrap.typeahead"]);angular.module("ui.bootstrap.tpls",["template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]);angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(d,c){function a(f,g){if(f.currentStyle){return f.currentStyle[g]}else{if(c.getComputedStyle){return c.getComputedStyle(f)[g]}}return f.style[g]}function e(f){return(a(f,"position")||"static")==="static"}var b=function(g){var f=d[0];var h=g.offsetParent||f;while(h&&h!==f&&e(h)){h=h.offsetParent}return h||f};return{position:function(g){var f=this.offset(g);var k={top:0,left:0};var h=b(g[0]);if(h!=d[0]){k=this.offset(angular.element(h));k.top+=h.clientTop-h.scrollTop;k.left+=h.clientLeft-h.scrollLeft}var j=g[0].getBoundingClientRect();return{width:j.width||g.prop("offsetWidth"),height:j.height||g.prop("offsetHeight"),top:f.top-k.top,left:f.left-k.left}},offset:function(f){var g=f[0].getBoundingClientRect();return{width:g.width||f.prop("offsetWidth"),height:g.height||f.prop("offsetHeight"),top:g.top+(c.pageYOffset||d[0].body.scrollTop||d[0].documentElement.scrollTop),left:g.left+(c.pageXOffset||d[0].body.scrollLeft||d[0].documentElement.scrollLeft)}}}}]);angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(c,b,a){b.addClass("ng-binding").data("$binding",a.bindHtmlUnsafe);c.$watch(a.bindHtmlUnsafe,function d(e){b.html(e||"")})}});angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(b){var a=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(e){var f=e.match(a),c,d,g;if(!f){throw new Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+e+"'.")}return{itemName:f[3],source:b(f[4]),viewMapper:b(f[2]||f[1]),modelMapper:b(f[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(e,f,c,d,h,g,b){var a=[9,13,27,38,40];return{require:"ngModel",link:function(t,m,B,j){var z=t.$eval(B.typeaheadMinLength)||1;var n=t.$eval(B.typeaheadWaitMs)||0;var u=t.$eval(B.typeaheadEditable)!==false;var x=f(B.typeaheadLoading).assign||angular.noop;var w=f(B.typeaheadOnSelect);var y=B.typeaheadInputFormatter?f(B.typeaheadInputFormatter):undefined;var D=B.typeaheadAppendToBody?f(B.typeaheadAppendToBody):false;var k=f(B.ngModel).assign;var C=b.parse(B.typeahead);var o;var s=angular.element("<div typeahead-popup></div>");s.attr({matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"});if(angular.isDefined(B.typeaheadTemplateUrl)){s.attr("template-url",B.typeaheadTemplateUrl)}var l=t.$new();t.$on("$destroy",function(){l.$destroy()});var p=function(){l.matches=[];l.activeIdx=-1};var v=function(E){var F={$viewValue:E};x(t,true);c.when(C.source(t,F)).then(function(H){if(E===j.$viewValue&&o){if(H.length>0){l.activeIdx=0;l.matches.length=0;for(var G=0;G<H.length;G++){F[C.itemName]=H[G];l.matches.push({label:C.viewMapper(l,F),model:H[G]})}l.query=E;l.position=D?g.offset(m):g.position(m);l.position.top=l.position.top+m.prop("offsetHeight")}else{p()}x(t,false)}},function(){p();x(t,false)})};p();l.query=undefined;var r;j.$parsers.unshift(function(E){o=true;if(E&&E.length>=z){if(n>0){if(r){d.cancel(r)}r=d(function(){v(E)},n)}else{v(E)}}else{x(t,false);p()}if(u){return E}else{if(!E){j.$setValidity("editable",true);return E}else{j.$setValidity("editable",false);return undefined}}});j.$formatters.push(function(G){var F,E;var H={};if(y){H["$model"]=G;return y(t,H)}else{H[C.itemName]=G;F=C.viewMapper(t,H);H[C.itemName]=undefined;E=C.viewMapper(t,H);return F!==E?F:G}});l.select=function(G){var H={};var E,F;H[C.itemName]=F=l.matches[G].model;E=C.modelMapper(t,H);k(t,E);j.$setValidity("editable",true);w(t,{$item:F,$model:E,$label:C.viewMapper(t,H)});p();m[0].focus()};m.bind("keydown",function(E){if(l.matches.length===0||a.indexOf(E.which)===-1){return}E.preventDefault();if(E.which===40){l.activeIdx=(l.activeIdx+1)%l.matches.length;l.$digest()}else{if(E.which===38){l.activeIdx=(l.activeIdx?l.activeIdx:l.matches.length)-1;l.$digest()}else{if(E.which===13||E.which===9){l.$apply(function(){l.select(l.activeIdx)})}else{if(E.which===27){E.stopPropagation();p();l.$digest()}}}}});m.bind("blur",function(E){o=false});var q=function(E){if(m[0]!==E.target){p();l.$digest()}};h.bind("click",q);t.$on("$destroy",function(){h.unbind("click",q)});var A=e(s)(l);if(D){h.find("body").append(A)}else{m.after(A)}}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:true,templateUrl:"template/typeahead/typeahead-popup.html",link:function(c,b,a){c.templateUrl=a.templateUrl;c.isOpen=function(){return c.matches.length>0};c.isActive=function(d){return c.active==d};c.selectActive=function(d){c.active=d};c.selectMatch=function(d){c.select({activeIdx:d})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(d,a,b,c){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(h,g,f){var e=c(f.templateUrl)(h.$parent)||"template/typeahead/typeahead-match.html";d.get(e,{cache:a}).success(function(j){g.replaceWith(b(j.trim())(h))})}}}]).filter("typeaheadHighlight",function(){function a(b){return b.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(c,b){return b?c.replace(new RegExp(a(b),"gi"),"<strong>$&</strong>"):c}});angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]);angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-style="{display: isOpen()&&\'block\' || \'none\', top: position.top+\'px\', left: position.left+\'px\'}">\n    <li ng-repeat="match in matches" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>')}]);angular.module("template/typeahead/typeahead.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead.html",'<ul class="typeahead dropdown-menu" ng-style="{display: isOpen()&&\'block\' || \'none\', top: position.top+\'px\', left: position.left+\'px\'}">\n    <li ng-repeat="match in matches" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)">\n        <a tabindex="-1" ng-click="selectMatch($index)" ng-bind-html-unsafe="match.label | typeaheadHighlight:query"></a>\n    </li>\n</ul>')}]);angular.module("NgTagsInput",["NgTagsInput.tpls","NgTagsInput.tagsinput","ui.bootstrap"]);angular.module("NgTagsInput.tpls",["template/tagsinput.html"]);angular.module("NgTagsInput.tagsinput",[]).controller("tagsController",["$scope","$attrs",function(d,b,h,a){d.$on("typeahead-select",function(){setTimeout(function(){d.$apply(e)})});var c=("tagTypeahead" in b);d.closeable=("close" in b);d.animations=("animate" in b);d.placeholder=b.placeholder;var g=b.min?parseInt(b.min):2;d.newTag="";d.deleteIndex=-1;d.containsIndex=-1;d.handleKeypress=function(k){var j=k.keyCode;switch(j){case 13:d.containsIndex=d.tags.indexOf(d.newTag);k.preventDefault();e();break;case 8:f();break;case 9:d.deleteIndex=-1;d.element.removeClass("focus");break;case 65:if(k.ctrlKey){d.selectAll=true}else{d.selectAll=false}break}};function e(){if(d.newTag.length>=g){if(c){if(d.tags.indexOf(d.newTag)!==-1){blinkTags()}else{for(i=0;i<d.options.length;i++){if(d.options[i].value===d.newTag){d.tags.push(d.newTag);d.newTag=""}}}}else{if(d.tags.indexOf(d.newTag)!==-1){blinkTags()}else{d.tags.push(d.newTag);d.newTag=""}}}}d.newTagChange=function(){d.containsIndex=d.tags.indexOf(d.newTag);d.deleteIndex=-1;d.selectAll=false;setTimeout(function(){blinkTags()})};function f(){if(d.selectAll){d.tags.splice(0,d.tags.length);d.selectAll=false}else{if(d.newTag.length===0){if(d.deleteIndex===-1){d.deleteIndex=d.tags.length-1}else{d.removeTag(d.tags[d.deleteIndex]);d.deleteIndex=-1}}}}d.removeTag=function(j){d.tags.splice(d.tags.indexOf(j),1)};blinkTags=function(){}}]).directive("ngTags",function(a){return{restrict:"EA",controller:"tagsController",templateUrl:"template/tagsinput.html",transclude:true,replace:true,scope:{type:"=",close:"&"},link:function(l,c,k,e){l.element=c;var g=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;var d=k.tagTypeahead.match(g);var b=c[0].childNodes;var h;for(i=0;i<b.length;i++){if(b[i].nodeName==="INPUT"){h=$(b[i])}}$(c).click(function(n){h.show(0);h.focus();$(c).addClass("focus");n.stopPropagation()});$("html").click(function(){$(c).removeClass("focus");h.hide(0);l.$apply(l.deleteIndex=-1)});h.focus(function(){$(c).addClass("focus")});l.tags=l.$parent[k.ngTags];var m=l.$parent[d[4]];var f=d[2];var j=d[1];l.options=[];if(typeof j!=="undefined"){if(j.indexOf(".")!==-1){for(i=0;i<m.length;i++){l.options.push({value:m[i][j.split(".")[1]],label:null})}}else{for(i=0;i<m.length;i++){l.options.push({value:m[i],label:null})}}}if(typeof f!=="undefined"){if(f.indexOf("."!==-1)){for(i=0;i<l.options.length;i++){l.options[i].label=m[i][f.split(".")[1]]}}else{for(i=0;i<l.options.length;i++){l.options[i].label=m[i]}}}else{for(i=0;i<l.options.length;i++){l.options[i].label=l.options[i].value}}}}});angular.module("template/tagsinput.html",[]).run(["$templateCache",function(a){a.put("template/tagsinput.html","<div class='tags-input'>\n<span ng-repeat='tag in tags' ng-class='{\"animate\":animations}'><span class='tag label' ng-class='{\"label-warning attention\": containsIndex === {{$index}}, \"blink\":containsIndex === $index, \"animate\":animations, \"label-danger\": deleteIndex === $index || selectAll,  \"label-primary\": ($parent.params.containsIndex !== $index && $parent.params.deleteIndex !== $index)}'><span class='tag-text'>{{tag}}</span> <span class='glyphicon glyphicon-remove hover' ng-if='closeable' ng-click='removeTag(tag)'></span> </span></span>&nbsp;<input type='text' ng-keydown='handleKeypress($event)' ng-model='newTag' typeahead='o.value as o.label for o in options | filter:$viewValue | limitTo:8'  ng-change='newTagChange()' placeholder='{{placeholder}}' class='tag-input'/>\n</button></div>")}]);